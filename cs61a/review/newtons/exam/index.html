<!DOCTYPE html>
<html>
  <head>
    <meta name='author' content='Albert Wu'>
    <meta name='description' content='CS 61A TA website for Albert Wu'>
    <title>Newton's method: exam | Albert Wu</title>
    <link rel='stylesheet' type='text/css' href='/public/style.css'>
    <link href='http://fonts.googleapis.com/css?family=Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'>
    <link rel='stylesheet' type='text/css' href='/public/highlight/styles/mono-blue.css'>
    <script src='/public/highlight/highlight.pack.js'></script>
    <script>
      hljs.configure({languages:['python', 'lisp']});
      hljs.initHighlightingOnLoad();
    </script>
    <link rel='stylesheet' type='text/css' href='/cs61a/public/style.css'>
  <link rel='stylesheet' type='text/css' href='/cs61a/review/public/style.css'>
    

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-39937584-1', 'albertwu.org');
      ga('send', 'pageview');
    </script>

  </head>
  <body>
    <div id='nav-bar-toggle'>
      <div id='nav-bar-toggle-icon'>
        &lt;
      </div>
    </div>

    <div id='container'>
      <div id='logo'>
        <h1 id='nav-bar-hide'>Newton's method: exam</h1>
      </div>

      <div id='nav-bar'>
        <div id='nav-bar-headers'>
          <ul>
            <li id='nav-bar-headers-about'><a href='/'>About</a></li>
            <li id='nav-bar-headers-cs61a'><a href='/cs61a'>CS 61A</a>
              </li>
          </ul>
        </div>
        <div id='accordion'>
          <h3>Navigation</h3>
<div>
  <ul>
    <li><a href='/cs61a/review'>All Topics</a></li>
    <li><a href='/cs61a/review/mt1'>Midterm
      1</a></li>
    <li><a href='/cs61a/review/mt2'>Midterm
      2</a></li>
    <li><a href='/cs61a/review/final'>Final</a></li>
  </ul>
</div>
<h3>Code Writing</h3>
<div><ul>
  <li><a href="#code1">Q1</a></li>
  <li><a href="#code2">Q2</a></li>
  <li><a href="#code3">Q3</a></li>
  <li><a href="#code4">Q4</a></li>
</ul></div>
        </div>
        <div id='nav-bar-fixed'>
          

<p><a href='http://www-inst.eecs.berkeley.edu/~cs61a/'>CS 61A
  course page</a></p>
        </div>
      </div>

      <div id='content'>
          <div id='reference'>
    <h2>References</h2>

    <p>You can review newton's method in the following places</p>
    <ul>
  <li><a href="http://inst.eecs.berkeley.edu/~cs61a/sp14/slides/06_1pp.pdf">Lecture: Newton's method</a></li>
</ul>
  </div>

  We will be using the implementation of Newton's method and
iterative improvement from lecture:<pre><code># iterative improvement framework

def improve(update, close, guess=1):
    while not close(guess):
        guess = update(guess)
    return guess

def approx_eq(x, y, tolerance=1e-5):
    return abs(x - y) < tolerance

# Newton's method

def make_derivative(f, delta=1e-5):
    def derivative(x):
        df = f(x + delta) - f(x)
        return df / delta
    return derivative

def newton_update(f, df):
    def update(x):
        return x - f(x) / df(x)
    return update

def find_zero(f, df):
    def near_zero(x):
        return approx_eq(f(x), 0)
    return improve(newton_update(f, df), near_zero)</code></pre>


  <div id='contents'>
    <h2>Contents</h2>
    <ol>
  <li><a href="#code">Code Writing</a></li>
</ol>
  </div>

  <p>Each question has a "Toggle Solution" button -- click it to
  reveal that question's solution.</p>

  <noscript>You need to <b>enable JavaScript</b> to view the
    solutions.</noscript>

  <h2 id="code" class="subtopic anchor">Code Writing</h2>
<h3 id="code1" class="question anchor">Q1</h3>
<p>Using Newton's method, write a function
        <tt>fourth_root</tt> that calculates the fourth root of a
        number <tt>x</tt>. <i>Note</i>: this is not quite the same as
        finding the root of the fourth root (since that's just <tt>x =
        0</tt>).
        </p>
<pre><code>def fourth_root(x):
    "*** YOUR CODE HERE ***" </code></pre>
<button id='0' class='toggleButton'>Toggle Solution<noscript> (enable JavaScript)</noscript></button><div class="solution 0"><pre><code>def fourth_root(x):
    f = lambda y: y**4 - x
    return find_zero(f, make_derivative(f))</code></pre>
</div>
<h3 id="code2" class="question anchor">Q2</h3>
<p>An elementary exercise in calculus is to
        find a critical point of a function. The <a href='http://en.wikipedia.org/wiki/Critical_point_(mathematics)'>critical point</a>
        of a mathematical function <i>f</i> is a value <i>x</i> such
        that the <i>derivative of f</i> at <i>x</i> is equal to 0 (i.e.
        f'(x) = 0). For example, the critical point of
        <i>f(x) = (x - 1)<super>2</super></i> is <i>x = 1</i>.</p>

        <p>Write a function <tt>critical_point</tt> that takes a
        function <tt>f</tt> and returns a critical point for that
        function.</p>
<pre><code>def critical_point(f):
    """Returns a single critical point for the function F."""
    "*** YOUR CODE HERE ***" </code></pre>
<button id='1' class='toggleButton'>Toggle Solution<noscript> (enable JavaScript)</noscript></button><div class="solution 1"><pre><code>def critical_point(f):
    df = make_derivative(f)
    ddf = make_derivative(df)
    return find_zero(df, ddf)</code></pre>
</div>
<h3 id="code3" class="question anchor">Q3</h3>
<p>If Newton's method reaches a guess that has
        a slope of 0 (also known as a <a href='http://en.wikipedia.org/wiki/Critical_point_(mathematics)'>critical point</a>), then
        <tt>newton_update</tt> will raise a ZeroDivisionError (i.e.
        the derivative of the function = 0). Rewrite
        <tt>newton_update</tt> to add a small <tt>offset</tt> to the
        derivative if it is equal to zero to avoid this problem.</p>
<pre><code>def newton_update(f, df, offset=1e-5):
    "*** YOUR CODE HERE ***" </code></pre>
<button id='2' class='toggleButton'>Toggle Solution<noscript> (enable JavaScript)</noscript></button><div class="solution 2"><pre><code>def newton_update(f, df, offset=1e-5):
    def update(x):
        deriv = df(x)
        if deriv == 0:
            deriv += offset
        return x - f(x) / deriv
    return update</code></pre>
</div>
<h3 id="code4" class="question anchor">Q4</h3>
<p>In economics, <i><a href='http://en.wikipedia.org/wiki/Walrasian_auction'>t&acirc;tonnement</a></i> is an iterative process for finding price equilibria in a market. The price
        of a good is adjusted depending on the amount of excess
        demand until demand is equal to supply. The price at which
        this happens is called the equilibrium price. Here is one
        such recurrence for finding the equilibrium price:</p>

        <img src='tatonnement.png'>

        <p>where <i>p<sub>i</sub></i> is the price at iteration
        <i>i</i>, and <i>z<sub>i</sub></i> is the excess demand
        (demand minus supply) at iteration <i>i</i>.</p>

        <p>Write a function <tt>equilibrium</tt>, which takes
        in a supply and demand function (both functions that take in
        a price as an argument and output a quantity), and returns
        an approximation of the equilibrium price. See the docstring
        for more details.</p>
<pre><code>def equilibrium(supply, demand, tolerance=1e-2):
    """Calculates the equilibrium price for the given SUPPLY and
    DEMAND functions.

    You need to figure out two things: the UPDATE function and the
    ISCLOSE function. UPDATE should follow the equation described
    above. ISCLOSE should return True when demand minus supply is less
    than certain TOLERANCE level.

    PARAMETERS:
    supply    -- a function that takes a price and outputs
    demand    -- a function that takes a price and outputs
    tolerance -- how far from 0 the excess demand can vary
    """
    initial_guess = 1

    def update(p):
        "*** YOUR CODE HERE ***"

    def close(p):
        "*** YOUR CODE HERE ***"

    return improve(update, isclose, initial_guess)</code></pre>
<button id='3' class='toggleButton'>Toggle Solution<noscript> (enable JavaScript)</noscript></button><div class="solution 3"><pre><code>def equilibrium(supply, demand, tolerance=1e-2):
    initial_guess = 1

    def update(p):
        return p * (1 + demand(p) - supply(p))

    def isclose(p):
        return abs(demand(p) - supply(p)) &lt;= tolerance

    return improve(update, isclose, initial_guess)</code></pre>
</div>

  </div>
      </div>
    </div>
  </body>

  <script src='/public/jquery-1.10.1.min.js'></script>
  <script src="/public/jquery-scrolltofixed-min.js"></script>
  <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
  <script src="/public/nav-bar.js"></script>
  <script>
    $(document).ready(function() {
      $('#accordion').accordion({
        heightStyle: 'content'
      });
    });
  </script>
    <script src='/cs61a/review/public/toggle.js'></script>
  
</html>
