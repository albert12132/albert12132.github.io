<!DOCTYPE html>
<html>
  <head>
    <meta name='author' content='Albert Wu'>
    <meta name='description' content='CS 61A TA website for Albert Wu'>
    <title>CS 61A: Tail Recursion: basic</title>
    <link rel='stylesheet' type='text/css' href='/cs61a/public/style.css'>
    <link rel='stylesheet' type='text/css' href='/cs61a/public/prettify/prettify.css'>
    <link href='http://fonts.googleapis.com/css?family=Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'>
    <link rel='stylesheet' media='print' type='text/css' href='/cs61a/public/print.css'>
    <script src='/cs61a/public/prettify/prettify.js'></script>
      <link rel='stylesheet' type='text/css' href='/cs61a/review/public/style.css'>
    

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
        Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-39937584-1', 'berkeley.edu');
      ga('send', 'pageview');
    </script>

  </head>
  <body onload='prettyPrint()'>
    <div id='container'>
      <div id='logo'>
        <h1>Tail Recursion: basic</h1>
      </div>

      <div id='nav-bar'>
        <div id='accordion'>
          <h3>Navigation</h3>
<div>
  <ul>
    <li><a href='/cs61a/index.html'>Home</a></li>
    <li><a href='/cs61a/review/index.html'>All Topics</a></li>
    <li><a href='/cs61a/review/mt1.html'>Midterm
      1</a></li>
    <li><a href='/cs61a/review/mt2.html'>Midterm
      2</a></li>
    <li><a href='/cs61a/review/final.html'>Final</a></li>
  </ul>
</div>
<h3>Conceptual</h3>
<div><ul>
  <li><a href="#conceptual1">Q1</a></li>
  <li><a href="#conceptual2">Q2</a></li>
  <li><a href="#conceptual3">Q3</a></li>
</ul></div>
<h3>Code Writing</h3>
<div><ul>
  <li><a href="#code1">Q1</a></li>
  <li><a href="#code2">Q2</a></li>
  <li><a href="#code3">Q3</a></li>
  <li><a href="#code4">Q4</a></li>
</ul></div>
        </div>
        <div id='nav-bar-fixed'>
          
        </div>
        <a href='http://www-inst.eecs.berkeley.edu/~cs61a/fa13/'>CS
          61A course page</a>
      </div>

      <div id='content'>
          <div id='reference'>
    <h2>References</h2>

    <p>You can review tail recursion in the following places</p>
    <ul>
  <li><a href="http://www-inst.eecs.berkeley.edu/~cs61a/fa13/slides/27-Tail_1pps.pdf">Lecture: Tail Calls</a></li>
</ul>
  </div>

  

  <div id='contents'>
    <h2>Contents</h2>
    <ol>
  <li><a href="#conceptual">Conceptual</a></li>
  <li><a href="#code">Code Writing</a></li>
</ol>
  </div>

  <p>Each question has a "Toggle Solution" button -- click it to
  reveal that question's solution.</p>

  <noscript>You need to <b>enable JavaScript</b> to view the
    solutions.</noscript>

  <h2 id="conceptual" class="subtopic anchor">Conceptual</h2>
<h3 id="conceptual1" class="question anchor">Q1</h3>
<p>What is tail call optimization? What is the
        benefit to using it?</p>
<button id='0' class='toggleButton'>Toggle Solution<noscript> (enable JavaScript)</noscript></button><div class="solution 0"><p><b>Answer: </b>Tail call optimization is a
        compiler/interpreter optimization that makes memory usage
        more efficient for recursion. Normally, each recursive call
        requires a new frame, and each frame needs to stick around
        until all of the recursive calls are done. With tail call
        optimization, once we move on to the next recursive call, the
        old frame gets discarded, leaving only one frame in memory
        at a time.</p>
</div>
<h3 id="conceptual2" class="question anchor">Q2</h3>
<p>What is a tail context, in terms of Scheme?
        Why are tail contexts important for tail call optimization?
        </p>
<button id='1' class='toggleButton'>Toggle Solution<noscript> (enable JavaScript)</noscript></button><div class="solution 1"><p><b>Answer: </b>A tail context is a location in a Scheme
        function that the interpreter can identify as tail recursive.
        A Scheme function needs to be written in a particular way
        in order for the interpreter to realize that it should perform
        tail call optimization. The following are tail contexts:
        <ul>
  <li>The last sub-expression in the body of a <tt>lambda</tt></li>
  <li>The 2nd and 3rd sub-expression in an <tt>if</tt></li>
  <li>All non-predicate sub-expressions in a <tt>cond</tt></li>
  <li>The last sub-expression in <tt>and</tt> or <tt>or</tt></li>
  <li>The last sub-expression in a <tt>begin</tt></li>
</ul></p>
</div>
<h3 id="conceptual3" class="question anchor">Q3</h3>
<p>Which of the following Scheme functions
        are tail recursive?</p>
<pre class="prettyprint">
(define (one x)
    (if (= x 0)
        1
        (* x (one (- x 1)))))

(define (two x so-far)
    (if (= x 0)
        so-far
        (two (- x 1) (* so-far x))))

(define (three fn x)
    (cond ((null? x) #t)
          ((not (fn (car x))) #f)
          (else (three fn (cdr x)))))

(define (four fn x)
    (if (null? x)
        #t
        (and (four fn (cdr x)) (fn x))))</pre>
<button id='2' class='toggleButton'>Toggle Solution<noscript> (enable JavaScript)</noscript></button><div class="solution 2"><p><b>Answer: </b><ul>
  <li><tt>one</tt>: not tail recursive</li>
  <li><tt>two</tt>: tail recursive</li>
  <li><tt>three</tt>: tail recursive</li>
  <li><tt>four</tt>: not tail recursive</li>
</ul></p>
</div>

<h2 id="code" class="subtopic anchor">Code Writing</h2>
<h3 id="code1" class="question anchor">Q1</h3>
<p>Write a function <tt>reverse</tt> that is
        tail recursive. It should take a list <tt>lst</tt> and return
        the reverse of that list.</p>
<pre class="prettyprint">
(define (reverse lst)
    ; YOUR CODE HERE
    )

STk&gt; (reverse '(1 2 3 4))
(4 3 2 1)
STk&gt; (reverse nil)
()
</pre>
<p class="hint"><b>Hint</b>: You should use a helper function</p>
<button id='3' class='toggleButton'>Toggle Solution<noscript> (enable JavaScript)</noscript></button><div class="solution 3"><pre class="prettyprint">
(define (reverse lst)
    (define (reverse-help lst so-far)
        (if (null? lst)
            so-far
            (reverse-help (cdr lst) (cons (car lst) so-far))))
    (reverse-help lst nil))</pre>
</div>
<h3 id="code2" class="question anchor">Q2</h3>
<p>Write a function <tt>reduce</tt> that is
        tail recursive. It should take a list <tt>lst</tt>,
        <tt>combiner</tt> function, and a <tt>start</tt> value, and
        reduce all the elements in the list using the
        <tt>combiner</tt>, beginnning at <tt>start</tt>.</p>
<pre class="prettyprint">
(define (reduce combiner lst start)
    ; YOUR CODE HERE
    )

STk&gt; (reduce + '(1 2 3 4) 0)
10
STk&gt; (reduce - '(1 2 3 4) 0)
-10
STk&gt; (reduce + '(1 2 3 4) 10)
20
STk&gt; (reduce * '(1 2 3 4) 1)
24
</pre>
<button id='4' class='toggleButton'>Toggle Solution<noscript> (enable JavaScript)</noscript></button><div class="solution 4"><pre class="prettyprint">
(define (reduce combiner lst start)
    (if (null? lst)
        start
        (reduce combiner (cdr lst) (combiner start (car lst)))))</pre>
</div>
<h3 id="code3" class="question anchor">Q3</h3>
<p>Write a function <tt>all</tt> that is
        tail recursive. It should take a list <tt>lst</tt> and a
        function <tt>pred</tt>, and return true (<tt>#t</tt>) only if
        all the elements in the list satisfy the predicate.</p>
<pre class="prettyprint">
(define (all lst pred)
    ; YOUR CODE HERE
    )

STk&gt; (all '(1 2 3 4) even?)
#f
STk&gt; (all '(1 3 5) odd?)
#t</pre>
<button id='5' class='toggleButton'>Toggle Solution<noscript> (enable JavaScript)</noscript></button><div class="solution 5"><pre class="prettyprint">
(define (all lst pred)
    (if (null? lst)
        #t
        (and (pred (car lst)) (all (cdr lst) pred))))</pre>
</div>
<h3 id="code4" class="question anchor">Q4</h3>
<p>Write a function <tt>count</tt> that is
        tail recursive. It should take a list <tt>lst</tt> and an
        <tt>item</tt>, and return the number of times that
        <tt>item</tt> occurs in the list.</p>
<pre class="prettyprint">
(define (count lst item)
    ; YOUR CODE HERE
    )

STk&gt; (count '(1 2 3 4) 3)
1
STk&gt; (count '(2 3) 5)
0
STk&gt; (count '(2 2 4 2 3) 2)
3</pre>
<button id='6' class='toggleButton'>Toggle Solution<noscript> (enable JavaScript)</noscript></button><div class="solution 6"><pre class="prettyprint">
(define (count lst item)
    (define (count-help lst num)
        (cond ((null? lst) num)
              ((eq? (car lst) item) (count-help (cdr lst) (+ num 1)))
              (else (count-help (cdr lst) num))))
    (count-help lst 0))</pre>
</div>

  </div>
      </div>
    </div>
  </body>

  <script src='/cs61a/public/jquery-1.10.1.min.js'></script>
  <script src="/cs61a/public/jquery-scrolltofixed-min.js"></script>
  <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
  <script>
    $(document).ready(function() {
      $('#accordion').accordion({
        heightStyle: 'content'
      });
    });
  </script>
    <script src='/cs61a/review/public/nav-bar.js'></script>
  <script src='/cs61a/review/public/toggle.js'></script>
  
</html>
