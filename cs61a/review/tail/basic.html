<!DOCTYPE html>
<html>
  <head>
    <meta name='author' content='Albert Wu'>
    <meta name='description' content='CS 61A TA website for Albert Wu'>
    <title>Tail Recursion: basic | Albert Wu</title>
    <link rel='stylesheet' type='text/css' href='/public/css/style.css'>
    <link href='http://fonts.googleapis.com/css?family=Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'>
    <link rel='stylesheet' type='text/css' href='/public/css/mono-blue.css'>
    <script src='/public/js/highlight.pack.js'></script>
    <script>
      hljs.configure({languages:['python', 'lisp']});
      hljs.initHighlightingOnLoad();
    </script>
    <link rel='stylesheet' type='text/css' href='/cs61a/public/css/style.css'>
<link rel='stylesheet' type='text/css' href='/cs61a/review/public/css/style.css'>
    

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-39937584-1', 'albertwu.org');
      ga('send', 'pageview');
    </script>

  </head>
  <body>
    <div id='nav-bar-toggle'>
      <div id='nav-bar-toggle-icon'>
        &lt;
      </div>
    </div>

    <div id='container'>
      <div id='logo'>
        <h1 id='nav-bar-hide'>Tail Recursion: basic</h1>
      </div>

      <div id='nav-bar'>
        <div id='nav-bar-headers'>
          <ul>
            <li id='nav-bar-headers-about'><a href='/'>About</a></li>
            <li id='nav-bar-headers-cs61a'><a href='/cs61a'>CS 61A</a>
              </li>
          </ul>
        </div>
        <div id='accordion'>
          <h3>Navigation</h3>
<div>
  <ul>
    <li><a href='/cs61a/review'>All Topics</a></li>
    <li><a href='/cs61a/review/mt1'>Midterm
      1</a></li>
    <li><a href='/cs61a/review/mt2'>Midterm
      2</a></li>
    <li><a href='/cs61a/review/final'>Final</a></li>
  </ul>
</div>
<h3>Contents</h3>
<div>
<ul>
  <li><a href="#conceptual-questions">Conceptual Questions</a></li>
  <ul>
  <li><a href="#q1">Question 1: </a></li>
  <li><a href="#q2">Question 2: </a></li>
  <li><a href="#q3">Question 3: </a></li>
</ul>

  <li><a href="#code-writing-question">Code-Writing question</a></li>
  <ul>
  <li><a href="#q4">Question 4: </a></li>
  <li><a href="#q5">Question 5: </a></li>
  <li><a href="#q6">Question 6: </a></li>
  <li><a href="#q7">Question 7: </a></li>
</ul>

</ul>

</div>
        </div>
        <div id='nav-bar-fixed'>
          

<p><a href='http://www-inst.eecs.berkeley.edu/~cs61a/'>CS 61A
  course page</a></p>
        </div>
      </div>

      <div id='content'>
        <div id='reference'>
    <h2>References</h2>

    <p>You can review Tail Recursion in the following places</p>
    <a href="http://www-inst.eecs.berkeley.edu/~cs61a/fa13/slides/27-Tail_1pps.pdf">Lecture: Tail Calls</a>
  </div>

  

  <p>Each question has a "Toggle Solution" button -- click it to
  reveal that question's solution.</p>

  <noscript>You need to <b>enable JavaScript</b> to view the
    solutions.</noscript>

  

<h2 id="conceptual-questions">Conceptual Questions</h2>


<h3 class="question" id="q1">Question 1: </h3>

<p>What is tail call optimization? What is the benefit to using it?</p>


    <button id='0' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>

    <div class="solution 0">

<p>Tail call optimization is a compiler/interpreter optimization that
makes memory usage more efficient for recursion. Normally, each
recursive call requires a new frame, and each frame needs to stick
around until all of the recursive calls are done. With tail call
optimization, once we move on to the next recursive call, the old
frame gets discarded, leaving only one frame in memory at a time.</p>

</div>
    

<h3 class="question" id="q2">Question 2: </h3>

<p>What is a tail context, in terms of Scheme?  Why are tail contexts
important for tail call optimization?</p>


    <button id='1' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>

    <div class="solution 1">

<p>A tail context is a location in a Scheme function that the interpreter
can identify as tail recursive.  A Scheme function needs to be written
in a particular way in order for the interpreter to realize that it
should perform tail call optimization. The following are tail contexts:</p>

<ul>
  <li>The last sub-expression in the body of a <code>lambda</code></li>
  <li>The 2nd and 3rd sub-expression in an <code>if</code></li>
  <li>All non-predicate sub-expressions in a <code>cond</code></li>
  <li>The last sub-expression in <code>and</code> or <code>or</code></li>
  <li>The last sub-expression in a <code>begin</code></li>
</ul>

</div>
    

<h3 class="question" id="q3">Question 3: </h3>

<p>Which of the following Scheme functions are tail recursive?</p>

<pre><code>(define (one x)
    (if (= x 0)
        1
        (* x (one (&#x2d; x 1)))))

(define (two x so&#x2d;far)
    (if (= x 0)
        so&#x2d;far
        (two (&#x2d; x 1) (* so&#x2d;far x))))

(define (three fn x)
    (cond ((null? x) #t)
          ((not (fn (car x))) #f)
          (else (three fn (cdr x)))))

(define (four fn x)
    (if (null? x)
        #t
        (and (four fn (cdr x)) (fn x))))</code></pre>


    <button id='2' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>

    <div class="solution 2">

<ol>
  <li><code>one</code>: not tail recursive</li>
  <li><code>two</code>: tail recursive</li>
  <li><code>three</code>: tail recursive</li>
  <li><code>four</code>: not tail recursive</li>
</ol>

</div>
    


<h2 id="code-writing-question">Code-Writing question</h2>


<h3 class="question" id="q4">Question 4: </h3>

<p>Write a function <code>reverse</code> that is tail recursive. It should take a
list <code>lst</code> and return the reverse of that list.</p>

<pre><code>(define (reverse lst)
    ; YOUR CODE HERE
    )

STk&gt; (reverse &#x27;(1 2 3 4))
(4 3 2 1)
STk&gt; (reverse nil)
()</code></pre>

<p><strong>Hint</strong>: You should use a helper function.</p>


    <button id='3' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>

    <div class="solution 3">

<pre><code>(define (reverse lst)
    (define (reverse&#x2d;help lst so&#x2d;far)
        (if (null? lst)
            so&#x2d;far
            (reverse&#x2d;help (cdr lst) (cons (car lst) so&#x2d;far))))
    (reverse&#x2d;help lst nil))</code></pre>

</div>
    

<h3 class="question" id="q5">Question 5: </h3>

<p>Write a function <code>reduce</code> that is tail recursive. It should take a list
<code>lst</code>, <code>combiner</code> function, and a <code>start</code> value, and reduce all the
elements in the list using the <code>combiner</code>, beginnning at <code>start</code>.</p>

<pre><code>(define (reduce combiner lst start)
    ; YOUR CODE HERE
    )

STk&gt; (reduce + &#x27;(1 2 3 4) 0)
10
STk&gt; (reduce &#x2d; &#x27;(1 2 3 4) 0)
&#x2d;10
STk&gt; (reduce + &#x27;(1 2 3 4) 10)
20
STk&gt; (reduce * &#x27;(1 2 3 4) 1)
24</code></pre>


    <button id='4' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>

    <div class="solution 4">

<pre><code>(define (reduce combiner lst start)
    (if (null? lst)
        start
        (reduce combiner (cdr lst) (combiner start (car lst)))))</code></pre>

</div>
    

<h3 class="question" id="q6">Question 6: </h3>

<p>Write a function <code>all</code> that is tail recursive. It should take a list
<code>lst</code> and a function <code>pred</code>, and return true (<code>#t</code>) only if all the
elements in the list satisfy the predicate.</p>

<pre><code>(define (all lst pred)
    ; YOUR CODE HERE
    )

STk&gt; (all &#x27;(1 2 3 4) even?)
#f
STk&gt; (all &#x27;(1 3 5) odd?)
#t</code></pre>


    <button id='5' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>

    <div class="solution 5">

<pre><code>(define (all lst pred)
    (if (null? lst)
        #t
        (and (pred (car lst)) (all (cdr lst) pred))))</code></pre>

</div>
    

<h3 class="question" id="q7">Question 7: </h3>

<p>Write a function <code>count</code> that is tail recursive. It should take a list
<code>lst</code> and an <code>item</code>, and return the number of times that <code>item</code> occurs
in the list.</p>

<pre><code>(define (count lst item)
    ; YOUR CODE HERE
    )

STk&gt; (count &#x27;(1 2 3 4) 3)
1
STk&gt; (count &#x27;(2 3) 5)
0
STk&gt; (count &#x27;(2 2 4 2 3) 2)
3</code></pre>


    <button id='6' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>

    <div class="solution 6">

<pre><code>(define (count lst item)
    (define (count&#x2d;help lst num)
        (cond ((null? lst) num)
              ((eq? (car lst) item) (count&#x2d;help (cdr lst) (+ num 1)))
              (else (count&#x2d;help (cdr lst) num))))
    (count&#x2d;help lst 0))</code></pre>

</div>
    

  </div>
      </div>
    </div>
  </body>

  <script src='/public/js/jquery-1.10.1.min.js'></script>
  <script src="/public/js/jquery-scrolltofixed-min.js"></script>
  <script src="/public/js/jquery.localscroll-1.2.7-min.js"></script>
  <script src="/public/js/jquery.scrollTo-1.4.3.1-min.js"></script>
  <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
  <script src="/public/js/nav-bar.js"></script>
  <script>
    $(document).ready(function() {
      $('#accordion').accordion({
        heightStyle: 'content'
      });
      $.localScroll();
    });
  </script>
  <script src='/cs61a/review/public/js/toggle.js'></script>
  
</html>
